<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suítes - SuiteBook</title>

    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
</head>

<body class="dashboard-body">

    <div class="page-container">

        <main class="content">
            <h1 class="logo-title">SuiteBook</h1>
            <h2 class="page-subtitle">Suítes Para Alugar</h2>

            <section class="suites-grid">

                <article class="suite-card" data-preco="200" data-parcelas="10" data-juros="0">
                    <div class="card-image-placeholder"><img src="./Assets/Suite1.jpeg" alt=""></div>
                    <div class="card-details">
                        <div class="card-info">
                            <h3>Suíte 1</h3>
                            <div class="rating">
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-regular fa-star"></i>
                            </div>
                            <p class="price">R$ 0,00</p>
                            <p class="installments">10x de R$</p>
                        </div>
                        <button class="favorite-btn" aria-label="Favoritar Suíte 1">
                            <i class="fa-regular fa-heart"></i>
                        </button>
                    </div>
                    <button class="reserve-btn">Reservar</button>
                </article>

                <article class="suite-card" data-preco="200" data-parcelas="10" data-juros="0">
                    <div class="card-image-placeholder"><img src="./Assets/Suite2.jpeg" alt=""></div>
                    <div class="card-details">
                        <div class="card-info">
                            <h3>Suíte 2</h3>
                            <div class="rating">
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-regular fa-star"></i>
                            </div>
                            <p class="price">R$ 0,00</p>
                            <p class="installments">10x de R$</p>
                        </div>
                        <button class="favorite-btn" aria-label="Favoritar Suíte 2">
                            <i class="fa-regular fa-heart"></i>
                        </button>
                    </div>
                    <button class="reserve-btn">Reservar</button>
                </article>

                <article class="suite-card" data-preco="200" data-parcelas="10" data-juros="0">
                    <div class="card-image-placeholder"><img src="./Assets/Suite3.jpeg" alt=""></div>
                    <div class="card-details">
                        <div class="card-info">
                            <h3>Suíte 3</h3>
                            <div class="rating">
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                            </div>
                            <p class="price">R$ 0,00</p>
                            <p class="installments">10x de R$</p>
                        </div>
                        <button class="favorite-btn" aria-label="Favoritar Suíte 3">
                            <i class="fa-regular fa-heart"></i>
                        </button>
                    </div>
                    <button class="reserve-btn">Reservar</button>
                </article>

                <article class="suite-card" data-preco="200" data-parcelas="10" data-juros="0">
                    <div class="card-image-placeholder"><img src="./Assets/Suite4.jpeg" alt=""></div>
                    <div class="card-details">
                        <div class="card-info">
                            <h3>Suíte 4</h3>
                            <div class="rating">
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-regular fa-star"></i>
                            </div>
                            <p class="price">R$ 0,00</p>
                            <p class="installments">10x de R$</p>
                        </div>
                        <button class="favorite-btn" aria-label="Favoritar Suíte 4">
                            <i class="fa-regular fa-heart"></i>
                        </button>
                    </div>
                    <button class="reserve-btn">Reservar</button>
                </article>

            </section>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const suiteCards = document.querySelectorAll('.suite-card');

            const brl = v => Number(v).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });

            suiteCards.forEach(card => {
                const preco = parseFloat(card.dataset.preco || '0');
                const parcelas = parseInt(card.dataset.parcelas || '10', 10);
                const jurosMes = parseFloat(card.dataset.juros || '0');

                let valorParcela;
                if (jurosMes > 0) {
                    const i = jurosMes;
                    const n = parcelas;
                    valorParcela = preco * (i * Math.pow(1 + i, n)) / (Math.pow(1 + i, n) - 1);
                } else {
                    valorParcela = preco / parcelas;
                }

                const priceEl = card.querySelector('.price');
                const installmentsEl = card.querySelector('.installments');

                if (priceEl) priceEl.textContent = brl(preco);
                if (installmentsEl) installmentsEl.textContent = `${parcelas}x de ${brl(valorParcela)} no cartão ${jurosMes > 0 ? '(com juros)' : 'sem juros'}`;
            });

            document.querySelectorAll('.favorite-btn i').forEach(icon => {
                icon.addEventListener('click', () => {
                    icon.classList.toggle('fa-solid');
                    icon.classList.toggle('fa-regular');
                });
            });
        });

        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.reserve-btn').forEach((btn) => {
                btn.addEventListener('click', () => {
                    const card = btn.closest('.suite-card');
                    if (!card) return;

                    const nome = (card.querySelector('h3')?.textContent || 'Suíte').trim();
                    const preco = parseFloat(card.dataset.preco || '200');
                    if (Number.isNaN(preco)) {
                        alert('Preço inválido para esta suíte.');
                        return;
                    }

                    localStorage.setItem('suiteSelecionada', JSON.stringify({ nome, preco }));
                    window.location.href = 'pagamento.html';
                });
            });
        });

    </script>
</body>

</html>